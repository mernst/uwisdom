The tar file extracts into its own directory; I call it "bobbyandjax"

# To install a new version of Bobby:
mv bobby62.zip ~/java/bobbyandjax
cd ~/java/bobbyandjax
mv com/ibm/bobby bobby61-199905
unzip bobby62.zip
cd com/ibm/bobby/doc
unzip bobbydoc.zip
# then do the below.

etags *.java com/ibm/bobby/*.java com/ibm/jax/*.java 
(cd com/ibm/bobby; etags *.java)
(cd com/ibm/jax; etags *.java)
(cd com/ibm; etags bobby/*.java jax/*.java)

javadoc-escape-anchors /homes/fish/mernst/java/bobbyandjax/com/ibm/bobby/doc/*.html
# Now consider deleting all the .bak versions of the html files.

Remake ~/emacs/jdk-index.el; see its header, or the top of
~/bin/share/jdk-index-to-alist.

# Convert the Makefiles from DOS CRLF to Unix LF line-breaking conventions.
chmod -R +w .
foreach i (`findfile '*.java'`)
  dos2unix $i $i | grep -v "could not get keyboard type US keyboard assumed" | grep -v "could not open /dev/kbd to get keyboard type US keyboard assumed"
end

make bobby "JAVACOMPILE=jikes +D -g"

===========================================================================

As of 6/24/99, the maintainer of Bobby is Doug Lorch <lorch@us.ibm.com>.

Old info:
The current maintainers (of Bobby and Jax) are Frank Tip and David Streeter
<daves@ca.ibm.com> of IBM Toronto who is working to turn Jax into an optimizer.
Chris Laffra <laffra@watson.ibm.com> has forked off a separate version of
Bobby, so isn't directly involved (except insofar as he should be copied
regarding typos in the manual and other modifications he might like to make
too).

Jax:
 * The jax program appears in the top-level directory, not in the
   com/ibm/jax/ subdirectory.
 * The jax/opt subdirectory is for David Streeter's optimizer code.
 * BM_ names are for Jimmy, the predecessor to Bobby.  Any such files are
   obsolete.
 * The "methods" and "fields" programs give information about a class file.

Questions:
 * In trace, why the big hex constant?  (It's used to initialize the
   BM_environment.)  (Maybe that much already need to be loaded before we
   could start doing other work, so we didn't have an opportunity to
   instrument it?  Seems unlikely.)
 * Are there examples of using a ClassLoader to rewrite class files as they
   are loaded into the JVM?  I see none in the distribution Frank gave me.

===========================================================================

Is there a convenient way to make a class (but not all its members) public?
BB_Class.becomePublic changes not just the class but all its elements to
public.

It might be nice to reformat the comments in BB_LineNumberAttribute.java to
keep them less than 80 characters wide.

---------------------------------------------------------------------------

Documentation typo:

--- /homes/fish/mernst/java/bobbyandjax/com/ibm/bobby/BB_LineNumberAttribute.java	Tue Jun  1 15:08:09 1999
+++ -	Mon Jun 14 09:30:48 1999
@@ -10,7 +10,7 @@
     If LineNumberTable attributes are present in the attributes table of a given Code
     attribute, then they may appear in any order. Furthermore, multiple LineNumberTable
     attributes may together represent a given line of a Java source file; that is,
-    LineNumberTable attributes need not be one-to-one with source lines.3
+    LineNumberTable attributes need not be one-to-one with source lines.
 
     LineNumberTable_attribute {
         u2 attribute_name_index;

---------------------------------------------------------------------------

This cast is unnecessary:

cd /homes/fish/mernst/java/bobbyandjax/com/ibm/bobby/
diff -u -b -r /homes/fish/mernst/java/bobbyandjax/com/ibm/bobby/BB_Class.java.\~2\~ /homes/fish/mernst/java/bobbyandjax/com/ibm/bobby/BB_Class.java
--- /homes/fish/mernst/java/bobbyandjax/com/ibm/bobby/BB_Class.java.~2~	Tue Jun  1 18:15:07 1999
+++ /homes/fish/mernst/java/bobbyandjax/com/ibm/bobby/BB_Class.java	Thu Jun  3 11:15:28 1999
@@ -949,7 +949,7 @@
 	try {
 	    findOnPath:
 	    for (int n=0; n<classPath.size(); n++) {
-		String p = (String)classPath.elementAt(n);
+		String p = classPath.elementAt(n);
 		String path = p + "/" + target;
 		File file = new File(path);
 		if (file.exists()) {


---------------------------------------------------------------------------

I already submitted these patches once.  The constructor doesn't accord
with the notion of a BB_*Vector as having no more functionality than a
Vector.

cd /homes/fish/mernst/java/bobbyandjax/com/ibm/bobby/
diff -u -b -r /homes/fish/mernst/java/bobbyandjax/com/ibm/bobby/BB_ClassVector.java.\~1\~ /homes/fish/mernst/java/bobbyandjax/com/ibm/bobby/BB_ClassVector.java
--- /homes/fish/mernst/java/bobbyandjax/com/ibm/bobby/BB_ClassVector.java.~1~	Tue Jun  1 15:08:08 1999
+++ /homes/fish/mernst/java/bobbyandjax/com/ibm/bobby/BB_ClassVector.java	Tue Jun  1 15:28:35 1999
@@ -85,6 +85,20 @@
 	    this.capacityIncrement = capacityIncrement;
     }
     /**
+     * Constructs a new BB_ClassVector using the specified contents.
+     *
+     * @author		OTI
+     * @version		initial
+     *
+     * @param		elements	the initial elements of the new BB_ClassVector
+     */
+    public BB_ClassVector (BB_Class[] initialElements) {
+	this(initialElements.length);
+	elementCount = initialElements.length;
+	for (int i=0; i<elementCount; i++)
+	    elementData[i] = initialElements[i];
+    }
+    /**
      * Adds the specified object at the end of this BB_ClassVector.
      *
      * @author		OTI

--- /homes/fish/mernst/java/bobbyandjax/com/ibm/bobby/BB_InsVector.java	Tue Jun  1 15:08:07 1999
+++ -	Tue Jun  1 15:24:15 1999
@@ -330,6 +330,18 @@
 	    }
 	    throw new ArrayIndexOutOfBoundsException ();
     }
+
+    /**
+     * Appends all of the elements in the BB_InsVector to the end of this
+     * BB_InsVector.
+     */
+    // This is far from the most efficient possible implementation.
+    public final void addAll (BB_InsVector other) {
+	for (int i=0; i<other.size(); i++) {
+	    addElement(other.elementAt(i));
+	}
+    }
+
     /**
      * Answers if this BB_InsVector has no elements, a size of zero.
      *

--- /homes/fish/mernst/java/bobbyandjax/com/ibm/bobby/BB_FieldVector.java	Tue Jun  1 15:08:03 1999
+++ -	Tue Jun  1 15:26:58 1999
@@ -312,6 +312,18 @@
 	    }
 	    throw new ArrayIndexOutOfBoundsException ();
     }
+
+    /**
+     * Appends all of the elements in the BB_FieldVector to the end of this
+     * BB_FieldVector.
+     */
+    // This is far from the most efficient possible implementation.
+    public final void addAll (BB_FieldVector other) {
+	for (int i=0; i<other.size(); i++) {
+	    addElement(other.elementAt(i));
+	}
+    }
+
     /**
      * Answers if this BB_FieldVector has no elements, a size of zero.
      *

===========================================================================

Bobby local variables table:  I should be able to just adapt
BB_LineNumberAttribute.java.
However, I want to have pointers to both the beginning and the end PC of
the range.
I will also want methods that, given a bytecode/instruction, return
all the local variables active at that bytecode/instruction.

===========================================================================

DaikonTransformer:

Terrible problem with Hoffman when Xform.exclude contains "HeaderTableDriver".
(That accounts for 1% of all the calls in the .dtrace file.)
What is going on?

In Hoffman, I had to disable the JIT in order to get proper operation.
(For instance, "make Manifest.daikon".)

Xform bug with Applets:
  javanj ThreadLister
  javanj -verbose ThreadLister
  javanj -verbose Xform -x EmptyTransformer ThreadLister
  javanj -verbose Xform --debug -x EmptyTransformer ThreadLister
  javanj Xform -x EmptyTransformer ThreadLister
  javanj Xform -x TraceTransformer ThreadLister
Another example of the problem is MDEThreadLister, whose code is:
  import java.io.*;
  public class MDEThreadLister {
    public static void main(String[] args) {
	System.out.println("Here is the output.");
	// System.exit(1);
    }
    public static class Applet extends java.applet.Applet {
    }
  }
We do exit the main class, but other threads appear to be live.
If I uncomment "System.exit(1);", all is well, unsurprisingly:
System.exit(int) kills the Java virtual machine.

I want a way of checking that a bad property name was not given.  Perhaps
each classtransformer can define the properties it expects?  Or perhaps
this is overkill for the time being.
Document the properties:
  Xform.debug
  Xform.action	run write print runwrite
  Xform.transformers
  Xform.projectNonprefixes (or Xform.exclude)
  Daikon.outputDir
  Daikon.javaDir
I need to add command-line arguments specifying where to find these files
(though there will be a default location, of course!).

helloify.java appears at http://www.inf.fu-berlin.de/~dahm/JavaClass/

A problem with working with bytecodes is optimization:  the bytecodes don't
necessarily look much like the original code.  See GetDBInfo.class for an
example.
Therefore, recommend that users byte-compile with debugging and without
optimization.

===========================================================================
